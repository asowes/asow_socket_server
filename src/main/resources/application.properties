# ----------------------------------------
# CORE PROPERTIES
# ----------------------------------------

# PROFILES
spring.profiles.active=dev
#spring.profiles.active=test
#spring.profiles.active=live
server.servlet.context-path = /api
# SPRING CONFIG (ConfigFileApplicationListener)
spring.config.name=application
spring.config.location=/config/

# APPLICATION SETTINGS (SpringApplication)
spring.main.banner-mode=console

# LOGGING
logging.level.org.springframework=info
logging.level.org.springframework.web=debug

# EMBEDDED SERVER CONFIGURATION (ServerProperties)
server.port=8181
server.servlet.session.timeout=1800s
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.directory=logs
server.tomcat.max-threads=800
server.tomcat.uri-encoding=UTF-8
server.tomcat.max-connections=20
server.error.whitelabel.enabled=true
server.error.path=/error

# HTTP ENCODING
spring.http.encoding.force=true
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true

# JDBC DATASOURCE (DataSourceAutoConfiguration & DataSourceProperties)
spring.datasource.platform=postgres
spring.datasource.continueOnError=false
spring.datasource.separator=;
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/asow?characterEncoding=utf8&useSSL=false&autoReconnect=true
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.tomcat.max-active=100
spring.datasource.tomcat.max-idle=8
spring.datasource.tomcat.min-idle=8
spring.datasource.tomcat.initial-size=10
spring.datasource.tomcat.validation-query=false
spring.datasource.tomcat.test-on-borrow=false
spring.datasource.tomcat.test-on-return=false
spring.datasource.data=
spring.datasource.initialization-mode=always

# JPA (JpaBaseConfiguration, HibernateJpaAutoConfiguration)
spring.jpa.show-sql=false
spring.jpa.database=mysql
spring.jpa.generate-ddl=false
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
#DB结构一旦定下，就应该改为update模式了！
spring.jpa.hibernate.ddl-auto=create-drop
spring.data.jpa.repositories.enabled=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect
spring.jpa.open-in-view=true


# AOP
spring.aop.auto=true
spring.aop.proxy-target-class=true

# Actuator
management.endpoint.shutdown.enabled=true
management.endpoints.web.exposure.include=shutdown,info,health
shutdown.whitelist=127.0.0.1

# Logging
logging.level.org.springframework.security*=DEBUG
logging.level.org.springframework.http.client.support=DEBUG
logging.level.org.springframework.web.client=DEBUG
logging.level.org.springframework.security.oauth2.client=DEBUG
logging.level.org.springframework.security.web.access=DEBUG
logging.level.org.springframework.web.filter=DEBUG
logging.level.org.springframework.security.config.annotation.web=DEBUG

# file size
spring.servlet.multipart.max-file-size=10240KB
spring.servlet.multipart.max-request-size=10240KB

spring.security.user.name=test
spring.security.user.password=test